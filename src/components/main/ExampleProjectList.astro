---
import {
  useFilterCollection,
  useTranslatedPath,
  useTranslations,
} from "../../i18n/utils";
import ProjectCard from "@components/projects/ProjectCard.astro";
import { getCollection } from "astro:content";

const t = useTranslations(Astro.currentLocale);
const translatedPath = useTranslatedPath(Astro.currentLocale);

const projects = (await getCollection("projects"))
  .filter((project) => project.data.showOnMain)
  .filter(useFilterCollection(Astro.currentLocale))
  .sort((a, b) => {
    return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
  });
---

<h2>
  {t("main.exampleProjectList.someProjects")}/ <a
    href={translatedPath("/projects")}
    >{t("main.exampleProjectList.allProjects")}</a
  >
</h2>
<div class="flex flex-col gap-8">
  {projects.map((project) => <ProjectCard project={project} />)}
</div>
